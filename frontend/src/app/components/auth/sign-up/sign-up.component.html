<div class="container d-flex justify-content-center align-items-center min-vh-100">
  <div class="col-12">
    <div class="alert alert-info text-center mb-4" role="alert">
      Please register as a seller to start listing your products!
    </div>
    <mat-card class="sign-in-card sign-up-card">
      <mat-card-header>
        <mat-card-title class="text-center w-100 mb-4">
          <h2 style="text-align: center">Join grit:Tee</h2>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="form" (ngSubmit)="submit()">
          <!-- Dropdown Avatar Upload -->
          <div
            class="avatar-section mb-3 text-center position-relative"
            style="width: 300px; margin: auto"
          >
            <img
              [src]="avatar"
              alt="Default avatar"
              class="avatar-preview mb-2 rounded-circle"
              style="width: 120px; height: 120px"
            />
            <p class="text-secondary mt-2" style="font-size: 0.8em; max-width: 280px; margin: 0 auto;">
              This is your default avatar. You can upload your own picture later in your profile settings.
            </p>
          </div>
          <!-- Error Alert  -->
          <div class="alert alert-danger" *ngIf="errorMessage" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>
            {{ errorMessage }}
          </div>
          <!-- Name Field -->
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <mat-label>Full Name</mat-label>
            <input matInput type="text" formControlName="name" placeholder="John Doe" />
            <mat-icon matPrefix>person</mat-icon>
            <mat-error *ngIf="form.get('name')?.hasError('required')"> Name is required </mat-error>
            <mat-error *ngIf="form.get('name')?.hasError('minlength')">
              Name must be at least 2 characters
            </mat-error>
          </mat-form-field>

          <!-- Email Field -->
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="you@example.com" />
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="form.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('email')">
              Please enter a valid email
            </mat-error>
          </mat-form-field>

          <!-- Password Field -->
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <mat-label>Password</mat-label>
            <input matInput type="password" formControlName="password" placeholder="••••••••" />
            <mat-icon matPrefix>lock</mat-icon>
            <mat-error *ngIf="form.get('password')?.hasError('required')">
              Password is required
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('minlength')">
              Password must be at least 8 characters
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('pattern')">
              Password must be at least 8 characters, include one lowercase letter and one number.
            </mat-error>
          </mat-form-field>

          <!-- Confirm Password Field -->
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              type="password"
              formControlName="confirmPassword"
              placeholder="••••••••"
            />
            <mat-icon matPrefix>lock</mat-icon>
            <mat-error *ngIf="form.hasError('notMatching') && form.get('confirmPassword')?.touched">
              Passwords do not match
            </mat-error>
          </mat-form-field>

          <!-- Account Type Radio Group -->
          <div class="mb-3">
            <mat-label>Account Type</mat-label>
            <mat-radio-group formControlName="role" class="d-flex gap-3 mt-1">
              <mat-radio-button value="client">Client</mat-radio-button>
              <mat-radio-button value="seller">Seller</mat-radio-button>
            </mat-radio-group>
          </div>

          <!-- Submit Button -->
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="w-100 mb-3 hover-lift"
            [disabled]="form.invalid || isLoading"
          >
          <mat-spinner diameter="20" *ngIf="isLoading" class="d-inline-block me-2"></mat-spinner>
            {{ isLoading ? 'Creating Account...' : 'Create Account' }}
          </button>

          <!-- Sign In Link -->
          <p class="text-center text-secondary">
            Already have an account?
            <a routerLink="/signin" class="text-primary">Sign In</a>
          </p>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
